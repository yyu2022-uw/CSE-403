{"version":3,"names":["_streamChat","require","_mapPollToStorable","_mapStorableToPoll","_QuickSqliteClient","_createSelectQuery","_createUpdateQuery","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","updatePollMessage","_ref","eventType","_ref$flush","flush","poll","poll_vote","userID","queries","pollsFromDB","QuickSqliteClient","executeSql","apply","createSelectQuery","id","_iterator","_step","_poll_vote$user","pollFromDB","serializedPoll","mapStorableToPoll","_serializedPoll$lates","latest_answers","_serializedPoll$own_v","own_votes","newOwnVotes","user","filter","vote","concat","_toConsumableArray2","newLatestAnswers","isVoteAnswer","answer","storablePoll","mapPollToStorable","assign","push","createUpdateQuery","logger","executeSqlBatch","exports"],"sourceRoot":"../../../../src","sources":["store/apis/updatePollMessage.ts"],"mappings":"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","ignoreList":[]}
